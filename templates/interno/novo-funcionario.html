<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ 'Editar' if funcionario else 'Novo' }} Funcionário | Lume Admin</title>
    <link rel="icon" href="/static/imagens/Logo/grandelogosemfundo.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/styleinterno.css">
</head>
<body>

    <div class="admin-container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 class="brand-text">LUME <span>ADMIN</span></h2>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="dashboard.html"><i class="fa-solid fa-chart-line"></i> Visão Geral</a></li>
                    <li><a href="pedido.html"><i class="fa-solid fa-bag-shopping"></i>Pedidos</a></li>
                    <li><a href="produto.html"><i class="fa-solid fa-box-open"></i> Produtos</a></li>
                    <li><a href="fornecedores.html"><i class="fa-solid fa-truck-fast"></i> Fornecedores</a></li>
                    <li class="active"><a href="funcionarios.html"><i class="fa-solid fa-users"></i> Funcionários</a></li>
                    <li><a href="financeiro.html"><i class="fa-solid fa-file-invoice-dollar"></i> Financeiro</a></li>
                    <li><a href="cliente.html"><i class="fas fa-user"></i>Clientes</a></li>
                    <li class="separator"></li>
                    <li><a href="configuracoes.html"><i class="fa-solid fa-gear"></i> Configurações</a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="login.html" class="logout-btn"><i class="fa-solid fa-right-from-bracket"></i> Sair</a>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="top-bar">
                <div class="welcome-text">
                    <h1>{{ 'Editar Cadastro' if funcionario else 'Novo Colaborador' }}</h1>
                    <p>Gestão de equipe e acessos.</p>
                </div>
            </header>

            <form class="product-form-container" action="/funcionario/salvar" method="POST" enctype="multipart/form-data">
                
                {% if funcionario %}
                    <input type="hidden" name="id_funcionario" value="{{ funcionario['id_funcionario'] }}">
                {% endif %}

                <div class="form-header">
                    <h2>Dados do Colaborador</h2>
                    <div class="form-actions">
                        <a href="/funcionarios" class="btn-cancel">Cancelar</a>
                        <button type="submit" class="btn-save">{{ 'Salvar Alterações' if funcionario else 'Cadastrar' }}</button>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="left-column">
                        
                        <div class="input-group">
                            <label>Nome Completo</label>
                            <input type="text" name="nome" placeholder="Nome Completo" value="{{ funcionario['nome'] if funcionario else '' }}" required>
                        </div>

                        <div class="form-row-2">
                            <div class="input-group">
                                <label>CPF</label>
                                <input type="text" name="cpf" class="mask-cpf" placeholder="000.000.000-00" value="{{ funcionario['cpf'] if funcionario else '' }}" required>
                            </div>
                            <div class="input-group">
                                <label>Data de Nascimento</label>
                                <input type="text" name="data_nasc" class="mask-data" value="{{ funcionario['data_nasc'] if funcionario else '' }}">
                            </div>
                        </div>

                        <div class="form-row-2">
                             <div class="input-group">
                                <label>Celular</label>
                                <input type="text" name="tel_cel" class="mask-tel" placeholder="(00) 00000-0000" value="{{ funcionario['tel_cel'] if funcionario else '' }}" required>
                            </div>
                            <div class="input-group">
                                <label>E-mail Pessoal</label>
                                <input type="email" name="email_pessoal" placeholder="ana@gmail.com" value="{{ funcionario['email_pessoal'] if funcionario else '' }}">
                            </div>
                        </div>
                        
                        <div class="form-row-2">
                            <div class="input-group">
                                <label>Cargo</label>
                                <input type="text" name="cargo" placeholder="Ex: Gerente de Vendas" value="{{ funcionario['cargo'] if funcionario else '' }}" required>
                            </div>
                            <div class="input-group">
                                <label>Departamento</label>
                                <select name="departamento">
                                    <option value="Vendas" {{ 'selected' if funcionario and funcionario['departamento'] == 'Vendas' else '' }}>Vendas</option>
                                    <option value="Produção/Estoque" {{ 'selected' if funcionario and funcionario['departamento'] == 'Produção/Estoque' else '' }}>Produção/Estoque</option>
                                    <option value="Administrativo" {{ 'selected' if funcionario and funcionario['departamento'] == 'Administrativo' else '' }}>Administrativo</option>
                                    <option value="Marketing" {{ 'selected' if funcionario and funcionario['departamento'] == 'Marketing' else '' }}>Marketing</option>
                                    <option value="Financeiro" {{ 'selected' if funcionario and funcionario['departamento'] == 'Financeiro' else '' }}>Financeiro</option>
                                    <option value="Jurídico" {{ 'selected' if funcionario and funcionario['departamento'] == 'Jurídico' else '' }}>Jurídico</option>
                                </select>
                            </div>
                        </div>

                        <h3 style="margin-top: 15px; margin-bottom: 10px; font-size: 1rem; color: #666;">Acesso ao Sistema</h3>
                        
                        <div class="input-group">
                            <label>E-mail de Login</label>
                            <input type="email" name="email_login" placeholder="ana@gmail.com" value="{{ funcionario['email_login'] if funcionario else '' }}" required>
                        </div>

                        <div class="form-row-2">
                            <div class="input-group">
                                <label>Senha {{ '(Deixe vazio para manter)' if funcionario else '' }}</label>
                                <input type="password" name="senha" placeholder="**********" value="{{ funcionario['senha'] if funcionario else '' }}"'required' if not funcionario else '' }}>
                            </div>
                            <div class="input-group">
                                <label>Permissão</label>
                                <select name="permissao">
                                    <option value="Gerente" {{ 'selected' if funcionario and funcionario['permissao'] == 'Gerente' else '' }}>Gerente</option>
                                    <option value="Administrador" {{ 'selected' if funcionario and funcionario['permissao'] == 'Administrador' else '' }}>Administrador</option>   
                                    <option value="Estoquista" {{ 'selected' if funcionario and funcionario['permissao'] == 'Estoquista' else '' }}>Estoquista</option>
                                    <option value="Financeiro" {{ 'selected' if funcionario and funcionario['permissao'] == 'Financeiro' else '' }}>Financeiro</option>
                                    <option value="Jurídico" {{ 'selected' if funcionario and funcionario['permissao'] == 'Jurídico' else '' }}>Jurídico</option>

                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="right-column">
                        <div class="upload-card">
                            <label>Foto de Perfil</label>
                            
                            {% if funcionario and funcionario['img_funcionario'] and funcionario['img_funcionario'] != 'sem_foto_user.png' %}
                                <div style="margin-bottom: 15px; text-align: center;">
                                    <img src="/static/uploads/{{ funcionario['img_funcionario'] }}" 
                                         style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%; border: 2px solid #ddd;">
                                    <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">Atual</p>
                                </div>
                            {% endif %}

                            <div class="drop-zone">
                                <i class="fa-solid fa-camera"></i>
                                <p>{{ 'Alterar Foto' if funcionario else 'Adicionar Foto' }}</p>
                                <input type="file" name="img_funcionario" accept="image/*">
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </main>
    </div>
    <script src="/static/mascaras.js"></script>
</body>
</html>